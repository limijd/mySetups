# ==============================================================================
# tmux 配置文件
# ==============================================================================

# ------------------------------------------------------------------------------
# 基础设置
# ------------------------------------------------------------------------------

# 允许识别 Meta/Option + 方向键组合（macOS 终端需要）
set -g xterm-keys on

# 设置转义序列延迟为 0，使 tmux 立即解析 Meta/方向键序列
set -sg escape-time 0

# 使用 vi 风格的状态栏按键绑定
set -g status-keys vi

# 设置历史记录缓冲区大小为 10000 行
set -g history-limit 10000

# 启用窗口自动重命名（根据当前运行的程序）
set-window-option -g automatic-rename on

# ------------------------------------------------------------------------------
# 状态栏样式
# ------------------------------------------------------------------------------

# 状态栏默认样式：浅灰色前景，深灰色背景
set -g status-style fg=colour249,bg=colour235

# 非活动窗口标签样式：中灰色前景，深灰色背景
setw -g window-status-style fg=colour244,bg=colour235

# 当前活动窗口标签样式：黑色前景，蓝色背景，加粗
setw -g window-status-current-style fg=colour16,bg=colour32,bold

# ------------------------------------------------------------------------------
# 窗口监控与通知
# ------------------------------------------------------------------------------

# 启用 bell 监听（当后台窗口发出 bell 时触发通知）
set-window-option -g monitor-bell on

# 只对非当前窗口响应 bell（避免干扰当前工作）
set-option -g bell-action other

# 关闭 visual-bell 弹窗提示（不在状态栏显示文字消息）
set-option -g visual-bell off

# 设置 bell 触发时的窗口标签样式：红色、加粗、闪烁
set-window-option -g window-status-bell-style 'fg=red,bold,blink'

# 关闭窗口活动监控（避免频繁输出干扰，只关注 bell）
setw -g monitor-activity off

# 关闭活动高亮显示
set -g visual-activity off

# ------------------------------------------------------------------------------
# 窗口导航快捷键
# ------------------------------------------------------------------------------

# Alt + 左/右方向键：切换到上一个/下一个窗口
bind-key -n M-Left previous-window
bind-key -n M-Right next-window

# Alt + h/l（vim 风格）：切换到上一个/下一个窗口
bind-key -n M-h previous-window
bind-key -n M-l next-window

# Shift + 左/右方向键：切换到上一个/下一个窗口
bind-key -n S-Left previous-window
bind-key -n S-Right next-window

# Ctrl + 左/右方向键：切换到上一个/下一个窗口
bind-key -n C-Left previous-window
bind-key -n C-Right next-window

# Ctrl + Tab / Ctrl + Shift + Tab：切换到下一个/上一个窗口
bind-key -n C-Tab next-window
bind-key -n C-S-Tab previous-window

# ------------------------------------------------------------------------------
# 窗口管理快捷键
# ------------------------------------------------------------------------------

# Ctrl + Shift + 左/右方向键：将当前窗口与左边/右边的窗口交换位置
bind-key -n C-S-Left swap-window -t -1
bind-key -n C-S-Right swap-window -t +1

# ------------------------------------------------------------------------------
# 会话管理快捷键
# ------------------------------------------------------------------------------

# prefix + X：确认后关闭当前会话
bind X confirm-before kill-session
